{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-3 px-2" style="max-width: 1000px;">
    <h1 class="text-center mb-3 py-2 rounded" style="color: white; font-size: clamp(1.1rem, 4vw, 1.3rem); background: linear-gradient(135deg, #7A0213, #A93226); box-shadow: 0 4px 8px rgba(0,0,0,0.2);">CITIZENS CHARTER</h1>
    
    {% if videos_citizens_charter %}
    <div class="row justify-content-center mb-4 gx-0">
        <div class="col-12 col-md-10 col-lg-8 px-0">
            <div class="card shadow-sm border-0">
                {% for video in videos_citizens_charter %}
                <div class="card-body p-1">
                    <div class="ratio ratio-16x9 mb-1 mx-auto" style="max-width: 400px;">
                        <video controls autoplay muted playsinline class="w-100 h-100">
                            <source src="{{ video.video.url }}" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <div class="text-center mt-1 px-2">
                        <h5 class="h6 mb-0" style="font-size: clamp(0.8rem, 3vw, 0.9rem);"><br>{{ video.caption }}</h5>
                        <small class="text-muted" style="font-size: 0.75rem;">Posted: {{ video.date_posted|date:"M d, Y" }}</small>
                    </div>
                </div>
                {% if not forloop.last %}<hr class="my-1" style="margin: 0 1rem;">{% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
    
    <!-- Charter Files Section -->
    <div class="charter-container bg-white rounded shadow-sm p-0 mt-4" style="border: 1px solid rgba(0,0,0,0.1);">
        <div class="charter-header d-flex justify-content-center align-items-center p-3 text-center" style="background: #7A0213; border-bottom: 1px solid #eee;">
            <h2 class="mb-0 text-white" style="font-size: 1rem;">
                <i class="fas fa-file-alt me-2"></i>Charter Files
            </h2>
        </div>

        {% if charters %}
        <div class="list-container">
            <!-- Column Headers -->
            <div class="d-none d-md-flex py-2 px-3" style="background: #f1f1f1; font-weight: 500; font-size: 0.8rem;">
                <div class="col-no" style="flex: 0 0 50px;">No.</div>
                <div class="col-title" style="flex: 1;">Title</div>
            </div>
            
            <!-- Charter List Items -->
            {% for charter in charters %}
            <div class="charter-item d-flex flex-column flex-md-row align-items-md-center py-2 px-3 border-bottom">
                <div class="col-no d-flex d-md-block align-items-center mb-1 mb-md-0" style="flex: 0 0 50px; font-weight: 500; color: #7A0213;">
                    <span class="d-md-none me-2">No:</span>
                    {{ forloop.counter }}
                </div>
                <div class="col-title flex-grow-1 pe-2">
                    <div style="font-size: 0.9rem; color: #7A0213;">{{ charter.title }}</div>
                    <small class="text-muted" style="font-size: 0.7rem;">
                        <i class="far fa-calendar-alt me-1"></i>{{ charter.date_posted|date:"M d, Y" }}
                    </small>
                </div>
                <div class="col-action mt-2 mt-md-0" style="flex: 0 0 100px;">
                    <a href="{% url 'citizens_charter_detail' charter.pk %}" 
                       class="btn btn-sm btn-outline-maroon w-100 py-1">
                        <span class="d-none d-md-inline">View</span>
                        <span class="d-md-none"><i class="fas fa-eye"></i></span>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-4 text-muted">
            <i class="fas fa-info-circle me-1"></i> No charter files available
        </div>
        {% endif %}
    </div>
</div>

<!-- Styles -->
<style>
    .charter-container {
        max-width: 800px;
        margin: 0 auto;
    }

    .charter-item {
        transition: background-color 0.2s ease;
    }

    .charter-item:hover {
        background-color: #f8f9fa;
    }

    .btn-outline-maroon {
        color: #7A0213;
        border-color: #7A0213;
        font-size: 0.75rem;
    }

    .btn-outline-maroon:hover {
        color: white;
        background-color: #7A0213;
    }

    /* Responsive adjustments */
    @media (max-width: 767px) {
        .charter-item {
            padding: 0.75rem 1rem;
        }

        .col-no, .col-title {
            font-size: 0.85rem;
        }

        .charter-header {
            text-align: center;
            justify-content: center;
        }
    }
</style>
{% endblock %}